schema: '2.0'
stages:
  train-bonsai@de:
    cmd: annif train -j $ANNIF_EVAL_JOBS gnd-bonsai-de data-sets/train-de.tsv.gz data-sets/train-de.tsv.gz
      data-sets/synth-de-1.tsv.gz data-sets/synth-de-2.tsv.gz data-sets/synth-de-3.tsv.gz
      data-sets/synth-de-4.tsv.gz
    deps:
    - path: data-sets/synth-de-1.tsv.gz
      hash: md5
      md5: af7d7de461221ae01e84f5eec6574924
      size: 24671106
    - path: data-sets/synth-de-2.tsv.gz
      hash: md5
      md5: a6073d24fcddad8ffb48226aa69fe236
      size: 27784239
    - path: data-sets/synth-de-3.tsv.gz
      hash: md5
      md5: 1bf3850a6d96ecf98e21f89f5a023889
      size: 28088905
    - path: data-sets/synth-de-4.tsv.gz
      hash: md5
      md5: bdd2527d0070fae98d58b818a8370e25
      size: 17670742
    - path: data-sets/train-de.tsv.gz
      hash: md5
      md5: 81624ebf8ae33199a80ed79cb8e376d0
      size: 40335909
    - path: data-sets/train-de.tsv.gz
      hash: md5
      md5: 81624ebf8ae33199a80ed79cb8e376d0
      size: 40335909
    - path: data/vocabs/gnd
      hash: md5
      md5: b72a15a4a00dcaa5a542f21f4fa5f604.dir
      size: 85563961
      nfiles: 3
    params:
      projects.toml:
        gnd-bonsai-de:
          name: GND Omikuji Bonsai German
          language: de
          backend: omikuji
          analyzer: snowball(german)
          vocab: gnd
          cluster_balanced: 'False'
          cluster_k: '100'
          max_depth: '3'
          min_df: '5'
          ngram: '2'
    outs:
    - path: data/projects/gnd-bonsai-de
      hash: md5
      md5: 973c74e00e6d7e2120fe2dbed2ec2398.dir
      size: 3916736870
      nfiles: 6
  eval@bonsai-de:
    cmd:
    - annif eval gnd-bonsai-de -j $ANNIF_EVAL_JOBS -l 20 -m F1@5 -m NDCG --metrics-file
      reports/bonsai-de.json data-sets/dev-de.tsv.gz
    deps:
    - path: data-sets/dev-de.tsv.gz
      hash: md5
      md5: d3fa135ace2243b610c04ac198bcb76f
      size: 8929532
    - path: data/projects/gnd-bonsai-de
      hash: md5
      md5: 973c74e00e6d7e2120fe2dbed2ec2398.dir
      size: 3916736870
      nfiles: 6
    params:
      projects.toml:
        gnd-bonsai-de:
          name: GND Omikuji Bonsai German
          language: de
          backend: omikuji
          analyzer: snowball(german)
          vocab: gnd
          cluster_balanced: 'False'
          cluster_k: '100'
          max_depth: '3'
          min_df: '5'
          ngram: '2'
    outs:
    - path: reports/bonsai-de.json
      hash: md5
      md5: 3cf886cb85f474542863223079588da4
      size: 95
  train-bonsai@en:
    cmd: annif train -j $ANNIF_EVAL_JOBS gnd-bonsai-en data-sets/train-en.tsv.gz data-sets/train-en.tsv.gz
      data-sets/synth-en-1.tsv.gz data-sets/synth-en-2.tsv.gz data-sets/synth-en-3.tsv.gz
      data-sets/synth-en-4.tsv.gz
    deps:
    - path: data-sets/synth-en-1.tsv.gz
      hash: md5
      md5: 4045d8ca5b5f1c6885fc21575f5c3de6
      size: 24446978
    - path: data-sets/synth-en-2.tsv.gz
      hash: md5
      md5: 64d52e0101bc5fbd1962be816686a939
      size: 21159270
    - path: data-sets/synth-en-3.tsv.gz
      hash: md5
      md5: cb3a2733a9d39d8b89113ba16883ee3a
      size: 22301911
    - path: data-sets/synth-en-4.tsv.gz
      hash: md5
      md5: aa1594f99623db89b727059d8dd10c81
      size: 27972667
    - path: data-sets/train-en.tsv.gz
      hash: md5
      md5: d1ffa3f2663bf15daa23eff4ef879d57
      size: 40600923
    - path: data-sets/train-en.tsv.gz
      hash: md5
      md5: d1ffa3f2663bf15daa23eff4ef879d57
      size: 40600923
    - path: data/vocabs/gnd
      hash: md5
      md5: b72a15a4a00dcaa5a542f21f4fa5f604.dir
      size: 85563961
      nfiles: 3
    params:
      projects.toml:
        gnd-bonsai-en:
          name: GND Omikuji Bonsai English
          language: en
          backend: omikuji
          analyzer: snowball(english)
          vocab: gnd
          cluster_balanced: 'False'
          cluster_k: '100'
          max_depth: '3'
          min_df: '5'
          ngram: '2'
    outs:
    - path: data/projects/gnd-bonsai-en
      hash: md5
      md5: ee2fc794a070d0ac85d3a40a18a37c65.dir
      size: 4146117509
      nfiles: 6
  eval@bonsai-en:
    cmd:
    - annif eval gnd-bonsai-en -j $ANNIF_EVAL_JOBS -l 20 -m F1@5 -m NDCG --metrics-file
      reports/bonsai-en.json data-sets/dev-en.tsv.gz
    deps:
    - path: data-sets/dev-en.tsv.gz
      hash: md5
      md5: 1030eea44ca106f48ed01a0bcf071e5f
      size: 8995980
    - path: data/projects/gnd-bonsai-en
      hash: md5
      md5: ee2fc794a070d0ac85d3a40a18a37c65.dir
      size: 4146117509
      nfiles: 6
    params:
      projects.toml:
        gnd-bonsai-en:
          name: GND Omikuji Bonsai English
          language: en
          backend: omikuji
          analyzer: snowball(english)
          vocab: gnd
          cluster_balanced: 'False'
          cluster_k: '100'
          max_depth: '3'
          min_df: '5'
          ngram: '2'
    outs:
    - path: reports/bonsai-en.json
      hash: md5
      md5: b4154879f0e55dc7d6adccb37222cfb4
      size: 95
  train-mllm@de:
    cmd: annif train -j $ANNIF_EVAL_JOBS gnd-mllm-de data-sets/train-de.tsv.gz
    deps:
    - path: data-sets/train-de.tsv.gz
      hash: md5
      md5: 81624ebf8ae33199a80ed79cb8e376d0
      size: 40335909
    - path: data/vocabs/gnd
      hash: md5
      md5: b72a15a4a00dcaa5a542f21f4fa5f604.dir
      size: 85563961
      nfiles: 3
    params:
      projects.toml:
        gnd-mllm-de:
          name: GND MLLM German
          language: de
          backend: mllm
          analyzer: snowball(german)
          vocab: gnd
          min_samples_leaf: 30
          max_leaf_nodes: 1996
          max_samples: 0.5143
    outs:
    - path: data/projects/gnd-mllm-de
      hash: md5
      md5: 548975c7273400a4ef15c022f9a2c851.dir
      size: 107540706
      nfiles: 2
  train-mllm@en:
    cmd: annif train -j $ANNIF_EVAL_JOBS gnd-mllm-en data-sets/train-en.tsv.gz
    deps:
    - path: data-sets/train-en.tsv.gz
      hash: md5
      md5: d1ffa3f2663bf15daa23eff4ef879d57
      size: 40600923
    - path: data/vocabs/gnd
      hash: md5
      md5: b72a15a4a00dcaa5a542f21f4fa5f604.dir
      size: 85563961
      nfiles: 3
    params:
      projects.toml:
        gnd-mllm-en:
          name: GND MLLM English
          language: en
          backend: mllm
          analyzer: simplemma(en)
          vocab: gnd
          min_samples_leaf: 18
          max_leaf_nodes: 1998
          max_samples: 0.8529
    outs:
    - path: data/projects/gnd-mllm-en
      hash: md5
      md5: 5b73c41ad2b6ff4b0a81cf962b233ec9.dir
      size: 149648150
      nfiles: 2
  eval@mllm-de:
    cmd:
    - annif eval gnd-mllm-de -j $ANNIF_EVAL_JOBS -l 20 -m F1@5 -m NDCG --metrics-file
      reports/mllm-de.json data-sets/dev-de.tsv.gz
    deps:
    - path: data-sets/dev-de.tsv.gz
      hash: md5
      md5: d3fa135ace2243b610c04ac198bcb76f
      size: 8929532
    - path: data/projects/gnd-mllm-de
      hash: md5
      md5: 548975c7273400a4ef15c022f9a2c851.dir
      size: 107540706
      nfiles: 2
    params:
      projects.toml:
        gnd-mllm-de:
          name: GND MLLM German
          language: de
          backend: mllm
          analyzer: snowball(german)
          vocab: gnd
          min_samples_leaf: 30
          max_leaf_nodes: 1996
          max_samples: 0.5143
    outs:
    - path: reports/mllm-de.json
      hash: md5
      md5: 6e47e3a4c3f4b0756924be1948cad87e
      size: 95
  eval@mllm-en:
    cmd:
    - annif eval gnd-mllm-en -j $ANNIF_EVAL_JOBS -l 20 -m F1@5 -m NDCG --metrics-file
      reports/mllm-en.json data-sets/dev-en.tsv.gz
    deps:
    - path: data-sets/dev-en.tsv.gz
      hash: md5
      md5: 1030eea44ca106f48ed01a0bcf071e5f
      size: 8995980
    - path: data/projects/gnd-mllm-en
      hash: md5
      md5: 5b73c41ad2b6ff4b0a81cf962b233ec9.dir
      size: 149648150
      nfiles: 2
    params:
      projects.toml:
        gnd-mllm-en:
          name: GND MLLM English
          language: en
          backend: mllm
          analyzer: simplemma(en)
          vocab: gnd
          min_samples_leaf: 18
          max_leaf_nodes: 1998
          max_samples: 0.8529
    outs:
    - path: reports/mllm-en.json
      hash: md5
      md5: 93ba76358b9de604e21b84b9120fc367
      size: 95
  dummy-train-bm-ensemble@bm-de:
    cmd:
    - mkdir -p data/projects/gnd-bm-ensemble-de
    - date -u > data/projects/gnd-bm-ensemble-de/timestamp
    deps:
    - path: data/projects/gnd-bonsai-de
      hash: md5
      md5: 973c74e00e6d7e2120fe2dbed2ec2398.dir
      size: 3916736870
      nfiles: 6
    - path: data/projects/gnd-mllm-de
      hash: md5
      md5: 548975c7273400a4ef15c022f9a2c851.dir
      size: 107540706
      nfiles: 2
    - path: data/vocabs/gnd
      hash: md5
      md5: b72a15a4a00dcaa5a542f21f4fa5f604.dir
      size: 85563961
      nfiles: 3
    outs:
    - path: data/projects/gnd-bm-ensemble-de
      hash: md5
      md5: 419c7a702f1f3be4f11101a82fa28e16.dir
      size: 29
      nfiles: 1
  dummy-train-bm-ensemble@bm-en:
    cmd:
    - mkdir -p data/projects/gnd-bm-ensemble-en
    - date -u > data/projects/gnd-bm-ensemble-en/timestamp
    deps:
    - path: data/projects/gnd-bonsai-en
      hash: md5
      md5: ee2fc794a070d0ac85d3a40a18a37c65.dir
      size: 4146117509
      nfiles: 6
    - path: data/projects/gnd-mllm-en
      hash: md5
      md5: 5b73c41ad2b6ff4b0a81cf962b233ec9.dir
      size: 149648150
      nfiles: 2
    - path: data/vocabs/gnd
      hash: md5
      md5: b72a15a4a00dcaa5a542f21f4fa5f604.dir
      size: 85563961
      nfiles: 3
    outs:
    - path: data/projects/gnd-bm-ensemble-en
      hash: md5
      md5: a261228b78a9dd3d44816880d10e0801.dir
      size: 29
      nfiles: 1
  eval@bm-ensemble-de:
    cmd:
    - annif eval gnd-bm-ensemble-de -j 16 -l 20 -m F1@5 -m NDCG --metrics-file reports/bm-ensemble-de.json
      data-sets/dev-de.tsv.gz
    deps:
    - path: data-sets/dev-de.tsv.gz
      hash: md5
      md5: d3fa135ace2243b610c04ac198bcb76f
      size: 8929532
    - path: data/projects/gnd-bm-ensemble-de
      hash: md5
      md5: 419c7a702f1f3be4f11101a82fa28e16.dir
      size: 29
      nfiles: 1
    params:
      projects.toml:
        gnd-bm-ensemble-de:
          name: GND BM ensemble German
          language: de
          backend: ensemble
          sources: gnd-mllm-de:0.1477:1.1611,gnd-bonsai-de:0.8523:1.1119
          vocab: gnd
    outs:
    - path: reports/bm-ensemble-de.json
      hash: md5
      md5: 54e1e38a53af79eaccb2395840671967
      size: 95
  eval@bm-ensemble-en:
    cmd:
    - annif eval gnd-bm-ensemble-en -j 16 -l 20 -m F1@5 -m NDCG --metrics-file reports/bm-ensemble-en.json
      data-sets/dev-en.tsv.gz
    deps:
    - path: data-sets/dev-en.tsv.gz
      hash: md5
      md5: 1030eea44ca106f48ed01a0bcf071e5f
      size: 8995980
    - path: data/projects/gnd-bm-ensemble-en
      hash: md5
      md5: a261228b78a9dd3d44816880d10e0801.dir
      size: 29
      nfiles: 1
    params:
      projects.toml:
        gnd-bm-ensemble-en:
          name: GND BM ensemble English
          language: en
          backend: ensemble
          sources: gnd-mllm-en:0.0985:0.8483,gnd-bonsai-en:0.9015:1.0342
          vocab: gnd
    outs:
    - path: reports/bm-ensemble-en.json
      hash: md5
      md5: cb48c40663c4ac44ec644ccd849e2f96
      size: 95
  train-xtransformer@de:
    cmd:
    - annif train -j 1 gnd-xtransformer-de data-sets/train-de.tsv.gz data-sets/synth-de-1.tsv.gz
      data-sets/synth-de-2.tsv.gz
    deps:
    - path: data-sets/synth-de-1.tsv.gz
      hash: md5
      md5: af7d7de461221ae01e84f5eec6574924
      size: 24671106
    - path: data-sets/synth-de-2.tsv.gz
      hash: md5
      md5: a6073d24fcddad8ffb48226aa69fe236
      size: 27784239
    - path: data-sets/train-de.tsv.gz
      hash: md5
      md5: 81624ebf8ae33199a80ed79cb8e376d0
      size: 40335909
    - path: data/vocabs/gnd
      hash: md5
      md5: b72a15a4a00dcaa5a542f21f4fa5f604.dir
      size: 85563961
      nfiles: 3
    params:
      projects.toml:
        gnd-xtransformer-de:
          name: GND XTransformer German
          language: de
          backend: xtransformer
          analyzer: snowball(german)
          vocab: gnd
          batch_size: 16
          truncate_length: 256
          learning_rate: 0.0001
          num_train_epochs: 3
          max_leaf_size: 1600
          nr_splits: 256
          threshold: 0.015
          Cn: 0.52
          Cp: 5.33
          bootstrap_model: weighted-linear
          loss_function: weighted-squared-hinge
          max_active_matching_labels: 500
          negative_sampling: tfn+man
          warmup_steps: 200
          ensemble_method: concat-only
          post_processor: l3-hinge
          cost_sensitive_ranker: true
          rel_mode: induce
          rel_norm: l1
          neg_mining_chain: tfn
          model_shortcut: FacebookAI/xlm-roberta-base
    outs:
    - path: data/projects/gnd-xtransformer-de
      hash: md5
      md5: f3485b1e3e9006d073664605e64940aa.dir
      size: 2232810191
      nfiles: 22
  train-xtransformer@en:
    cmd:
    - annif train -j 1 gnd-xtransformer-en data-sets/train-en.tsv.gz data-sets/synth-en-1.tsv.gz
      data-sets/synth-en-2.tsv.gz
    deps:
    - path: data-sets/synth-en-1.tsv.gz
      hash: md5
      md5: 4045d8ca5b5f1c6885fc21575f5c3de6
      size: 24446978
    - path: data-sets/synth-en-2.tsv.gz
      hash: md5
      md5: 64d52e0101bc5fbd1962be816686a939
      size: 21159270
    - path: data-sets/train-en.tsv.gz
      hash: md5
      md5: d1ffa3f2663bf15daa23eff4ef879d57
      size: 40600923
    - path: data/vocabs/gnd
      hash: md5
      md5: b72a15a4a00dcaa5a542f21f4fa5f604.dir
      size: 85563961
      nfiles: 3
    params:
      projects.toml:
        gnd-xtransformer-en:
          name: GND XTransformer English
          language: en
          backend: xtransformer
          analyzer: snowball(english)
          vocab: gnd
          batch_size: 16
          truncate_length: 256
          learning_rate: 0.0001
          num_train_epochs: 3
          max_leaf_size: 1600
          nr_splits: 256
          threshold: 0.015
          Cn: 0.52
          Cp: 5.33
          bootstrap_model: weighted-linear
          loss_function: weighted-squared-hinge
          max_active_matching_labels: 500
          negative_sampling: tfn+man
          warmup_steps: 200
          ensemble_method: concat-only
          post_processor: l3-hinge
          cost_sensitive_ranker: true
          rel_mode: induce
          rel_norm: l1
          neg_mining_chain: tfn
          model_shortcut: FacebookAI/xlm-roberta-base
    outs:
    - path: data/projects/gnd-xtransformer-en
      hash: md5
      md5: ca5e60c5d64c3d7e1474b4eb15d39154.dir
      size: 2074576173
      nfiles: 22
  eval@xtransformer-en:
    cmd:
    - annif eval gnd-xtransformer-en -j $ANNIF_EVAL_JOBS -l 20 -m F1@5 -m NDCG --metrics-file
      reports/xtransformer-en.json data-sets/dev-en.tsv.gz
    deps:
    - path: data-sets/dev-en.tsv.gz
      hash: md5
      md5: 1030eea44ca106f48ed01a0bcf071e5f
      size: 8995980
    - path: data/projects/gnd-xtransformer-en
      hash: md5
      md5: 2a9d0afea77110bf74877b1c9e089b5b.dir
      size: 2226010691
      nfiles: 22
    params:
      projects.toml:
        gnd-xtransformer-en:
          name: GND XTransformer English
          language: en
          backend: xtransformer
          analyzer: snowball(english)
          vocab: gnd
          batch_size: 16
          truncate_length: 256
          learning_rate: 0.0001
          num_train_epochs: 3
          max_leaf_size: 1600
          nr_splits: 256
          threshold: 0.015
          Cn: 0.52
          Cp: 5.33
          bootstrap_model: weighted-linear
          loss_function: weighted-squared-hinge
          max_active_matching_labels: 500
          negative_sampling: tfn+man
          warmup_steps: 200
          ensemble_method: concat-only
          post_processor: l3-hinge
          cost_sensitive_ranker: true
          rel_mode: induce
          rel_norm: l1
          neg_mining_chain: tfn
          model_shortcut: FacebookAI/xlm-roberta-base
    outs:
    - path: reports/xtransformer-en.json
      hash: md5
      md5: fe40282e73a6bc07d83c51716a157cdd
      size: 95
  eval@xtransformer-de:
    cmd:
    - annif eval gnd-xtransformer-de -j $ANNIF_EVAL_JOBS -l 20 -m F1@5 -m NDCG --metrics-file
      reports/xtransformer-de.json data-sets/dev-de.tsv.gz
    deps:
    - path: data-sets/dev-de.tsv.gz
      hash: md5
      md5: d3fa135ace2243b610c04ac198bcb76f
      size: 8929532
    - path: data/projects/gnd-xtransformer-de
      hash: md5
      md5: bf0bf64f0e856a57fa8c9cb02d8ee5e6.dir
      size: 2422619478
      nfiles: 22
    params:
      projects.toml:
        gnd-xtransformer-de:
          name: GND XTransformer German
          language: de
          backend: xtransformer
          analyzer: snowball(german)
          vocab: gnd
          batch_size: 16
          truncate_length: 256
          learning_rate: 0.0001
          num_train_epochs: 3
          max_leaf_size: 1600
          nr_splits: 256
          threshold: 0.015
          Cn: 0.52
          Cp: 5.33
          bootstrap_model: weighted-linear
          loss_function: weighted-squared-hinge
          max_active_matching_labels: 500
          negative_sampling: tfn+man
          warmup_steps: 200
          ensemble_method: concat-only
          post_processor: l3-hinge
          cost_sensitive_ranker: true
          rel_mode: induce
          rel_norm: l1
          neg_mining_chain: tfn
          model_shortcut: FacebookAI/xlm-roberta-base
    outs:
    - path: reports/xtransformer-de.json
      hash: md5
      md5: 691d91c736c36bfc67d11885d34d3275
      size: 94
  dummy-train-bmx-ensemble@bmx-de:
    cmd:
    - mkdir -p data/projects/gnd-bmx-ensemble-de
    - date -u > data/projects/gnd-bmx-ensemble-de/timestamp
    deps:
    - path: data/projects/gnd-bonsai-de
      hash: md5
      md5: 973c74e00e6d7e2120fe2dbed2ec2398.dir
      size: 3916736870
      nfiles: 6
    - path: data/projects/gnd-mllm-de
      hash: md5
      md5: 548975c7273400a4ef15c022f9a2c851.dir
      size: 107540706
      nfiles: 2
    - path: data/projects/gnd-xtransformer-de
      hash: md5
      md5: f3485b1e3e9006d073664605e64940aa.dir
      size: 2232810191
      nfiles: 22
    - path: data/vocabs/gnd
      hash: md5
      md5: b72a15a4a00dcaa5a542f21f4fa5f604.dir
      size: 85563961
      nfiles: 3
    outs:
    - path: data/projects/gnd-bmx-ensemble-de
      hash: md5
      md5: 224805ce9c7b7e8a74d1df0c336b49da.dir
      size: 29
      nfiles: 1
  dummy-train-bmx-ensemble@bmx-en:
    cmd:
    - mkdir -p data/projects/gnd-bmx-ensemble-en
    - date -u > data/projects/gnd-bmx-ensemble-en/timestamp
    deps:
    - path: data/projects/gnd-bonsai-en
      hash: md5
      md5: ee2fc794a070d0ac85d3a40a18a37c65.dir
      size: 4146117509
      nfiles: 6
    - path: data/projects/gnd-mllm-en
      hash: md5
      md5: 5b73c41ad2b6ff4b0a81cf962b233ec9.dir
      size: 149648150
      nfiles: 2
    - path: data/projects/gnd-xtransformer-en
      hash: md5
      md5: ca5e60c5d64c3d7e1474b4eb15d39154.dir
      size: 2074576173
      nfiles: 22
    - path: data/vocabs/gnd
      hash: md5
      md5: b72a15a4a00dcaa5a542f21f4fa5f604.dir
      size: 85563961
      nfiles: 3
    outs:
    - path: data/projects/gnd-bmx-ensemble-en
      hash: md5
      md5: 6fc32d1148c1a52e18f34ae896fb2b10.dir
      size: 29
      nfiles: 1
  eval@bmx-ensemble-de:
    cmd:
    - annif eval gnd-bmx-ensemble-de -j 1 -l 20 -m F1@5 -m NDCG --metrics-file reports/bmx-ensemble-de.json
      data-sets/dev-de.tsv.gz
    deps:
    - path: data-sets/dev-de.tsv.gz
      hash: md5
      md5: d3fa135ace2243b610c04ac198bcb76f
      size: 8929532
    - path: data/projects/gnd-bmx-ensemble-de
      hash: md5
      md5: 224805ce9c7b7e8a74d1df0c336b49da.dir
      size: 29
      nfiles: 1
    params:
      projects.toml:
        gnd-bmx-ensemble-de:
          name: GND BMX ensemble German
          language: de
          backend: ensemble
          sources: 
            gnd-mllm-de:0.1734:1.1675,gnd-bonsai-de:0.3823:1.0457,gnd-xtransformer-de:0.4443:1.0794
          vocab: gnd
    outs:
    - path: reports/bmx-ensemble-de.json
      hash: md5
      md5: bf1f3f9f4ad6feb14812a912e091dfe4
      size: 94
  eval@bmx-ensemble-en:
    cmd:
    - annif eval gnd-bmx-ensemble-en -j 1 -l 20 -m F1@5 -m NDCG --metrics-file reports/bmx-ensemble-en.json
      data-sets/dev-en.tsv.gz
    deps:
    - path: data-sets/dev-en.tsv.gz
      hash: md5
      md5: 1030eea44ca106f48ed01a0bcf071e5f
      size: 8995980
    - path: data/projects/gnd-bmx-ensemble-en
      hash: md5
      md5: 6fc32d1148c1a52e18f34ae896fb2b10.dir
      size: 29
      nfiles: 1
    params:
      projects.toml:
        gnd-bmx-ensemble-en:
          name: GND BMX ensemble English
          language: en
          backend: ensemble
          sources: 
            gnd-mllm-en:0.2403:0.8567,gnd-bonsai-en:0.4608:0.6855,gnd-xtransformer-en:0.2989:0.6290
          vocab: gnd
    outs:
    - path: reports/bmx-ensemble-en.json
      hash: md5
      md5: 57b70eed3492cf4b182da80d25b52105
      size: 95
  hyperopt-mllm@en:
    cmd:
    - annif hyperopt -j 64 --trials 200 --docs-limit 2000 gnd-mllm-en data-sets/dev-en.tsv.gz
    deps:
    - path: data-sets/dev-en.tsv.gz
      hash: md5
      md5: 1030eea44ca106f48ed01a0bcf071e5f
      size: 8995980
    params:
      projects.toml:
        gnd-mllm-en:
          name: GND MLLM English
          language: en
          backend: mllm
          analyzer: simplemma(en)
          vocab: gnd
  hyperopt-mllm@de:
    cmd:
    - annif hyperopt -j 64 --trials 200 --docs-limit 2000 gnd-mllm-de data-sets/dev-de.tsv.gz
    deps:
    - path: data-sets/dev-de.tsv.gz
      hash: md5
      md5: d3fa135ace2243b610c04ac198bcb76f
      size: 8929532
    params:
      projects.toml:
        gnd-mllm-de:
          name: GND MLLM German
          language: de
          backend: mllm
          analyzer: snowball(german)
          vocab: gnd
  eval@llm_ensemble-de:
    cmd:
    - annif eval gnd-llm_ensemble-de -j 16 -l 20 -m F1@5 -m NDCG --metrics-file reports/llm_ensemble-de.json
      data-sets/dev-de.tsv.gz
    deps:
    - path: data-sets/dev-de.tsv.gz
      hash: md5
      md5: d3fa135ace2243b610c04ac198bcb76f
      size: 8929532
    - path: data/projects/gnd-llm_ensemble-de
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    params:
      projects.toml:
        gnd-llm_ensemble-de:
          name: GND LLM-ensemble German
          language: de
          vocab: gnd
          backend: llm_ensemble
          sources: gnd-mllm-en,gnd-bonsai-en
          model: Qwen/Qwen3-4B
          sources_limit: 100
          llm_weight: 0.1
    outs:
    - path: reports/llm_ensemble-de.json
      hash: md5
      md5: ab9ce6f253c0dec885cd19ef90545d27
      size: 96
  hyperopt-ensemble@bm-de:
    cmd:
    - annif hyperopt -j 16 --trials 400 gnd-bm-ensemble-de data-sets/dev-de.tsv.gz
    deps:
    - path: data-sets/dev-de.tsv.gz
      hash: md5
      md5: d3fa135ace2243b610c04ac198bcb76f
      size: 8929532
    - path: data/projects/gnd-bm-ensemble-de
      hash: md5
      md5: 419c7a702f1f3be4f11101a82fa28e16.dir
      size: 29
      nfiles: 1
    params:
      projects.toml:
        gnd-bm-ensemble-de:
          name: GND BM ensemble German
          language: de
          backend: ensemble
          sources: gnd-mllm-de,gnd-bonsai-de
          vocab: gnd
  hyperopt-ensemble@bm-en:
    cmd:
    - annif hyperopt -j 16 --trials 400 gnd-bm-ensemble-en data-sets/dev-en.tsv.gz
    deps:
    - path: data-sets/dev-en.tsv.gz
      hash: md5
      md5: 1030eea44ca106f48ed01a0bcf071e5f
      size: 8995980
    - path: data/projects/gnd-bm-ensemble-en
      hash: md5
      md5: a261228b78a9dd3d44816880d10e0801.dir
      size: 29
      nfiles: 1
    params:
      projects.toml:
        gnd-bm-ensemble-en:
          name: GND BM ensemble English
          language: en
          backend: ensemble
          sources: gnd-mllm-en,gnd-bonsai-en
          vocab: gnd
  hyperopt-ensemble@bmx-de:
    cmd:
    - annif hyperopt -j 16 --trials 400 gnd-bmx-ensemble-de data-sets/dev-de.tsv.gz
    deps:
    - path: data-sets/dev-de.tsv.gz
      hash: md5
      md5: d3fa135ace2243b610c04ac198bcb76f
      size: 8929532
    - path: data/projects/gnd-bmx-ensemble-de
      hash: md5
      md5: 224805ce9c7b7e8a74d1df0c336b49da.dir
      size: 29
      nfiles: 1
    params:
      projects.toml:
        gnd-bmx-ensemble-de:
          name: GND BMX ensemble German
          language: de
          backend: ensemble
          sources: gnd-mllm-de,gnd-bonsai-de,gnd-xtransformer-de
          vocab: gnd
  hyperopt-ensemble@bmx-en:
    cmd:
    - annif hyperopt -j 16 --trials 400 gnd-bmx-ensemble-en data-sets/dev-en.tsv.gz
    deps:
    - path: data-sets/dev-en.tsv.gz
      hash: md5
      md5: 1030eea44ca106f48ed01a0bcf071e5f
      size: 8995980
    - path: data/projects/gnd-bmx-ensemble-en
      hash: md5
      md5: 6fc32d1148c1a52e18f34ae896fb2b10.dir
      size: 29
      nfiles: 1
    params:
      projects.toml:
        gnd-bmx-ensemble-en:
          name: GND BMX ensemble English
          language: en
          backend: ensemble
          sources: gnd-mllm-en,gnd-bonsai-en,gnd-xtransformer-en
          vocab: gnd
  eval@bmx-llm_ensemble-de:
    cmd:
    - annif eval gnd-bmx-llm_ensemble-de -j 1 -l 20 -m F1@5 -m NDCG --metrics-file
      reports/bmx-llm_ensemble-de.json data-sets/dev-de.tsv.gz
    deps:
    - path: data-sets/dev-de.tsv.gz
      hash: md5
      md5: d3fa135ace2243b610c04ac198bcb76f
      size: 8929532
    - path: data/projects/gnd-bmx-llm_ensemble-de
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    params:
      projects.toml:
        gnd-bmx-llm_ensemble-de:
          name: GND LLM-ensemble German
          language: de
          vocab: gnd
          backend: llm_ensemble
          sources: 
            gnd-mllm-de:0.1734:1.1675,gnd-bonsai-de:0.3823:1.0457,gnd-xtransformer-de:0.4443:1.0794
          model: Qwen/Qwen3-4B
          sources_limit: 100
          llm_weight: 0.092160560686234
          llm_exponent: 9.327634939176967
    outs:
    - path: reports/bmx-llm_ensemble-de.json
      hash: md5
      md5: 2c5a4173e2d85bd224272569be061510
      size: 92
  eval@bmx-llm_ensemble-en:
    cmd:
    - annif eval gnd-bmx-llm_ensemble-en -j 1 -l 20 -m F1@5 -m NDCG --metrics-file
      reports/bmx-llm_ensemble-en.json data-sets/dev-en.tsv.gz
    deps:
    - path: data-sets/dev-en.tsv.gz
      hash: md5
      md5: 1030eea44ca106f48ed01a0bcf071e5f
      size: 8995980
    - path: data/projects/gnd-bmx-llm_ensemble-en
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    params:
      projects.toml:
        gnd-bmx-llm_ensemble-en:
          name: GND LLM-ensemble English
          language: en
          vocab: gnd
          backend: llm_ensemble
          sources: 
            gnd-mllm-en:0.2403:0.8567,gnd-bonsai-en:0.4608:0.6855,gnd-xtransformer-en:0.2989:0.6290
          model: Qwen/Qwen3-4B
          sources_limit: 100
          llm_weight: 0.15920478188242815
          llm_exponent: 7.898256307182905
    outs:
    - path: reports/bmx-llm_ensemble-en.json
      hash: md5
      md5: e604610916f5c9c1c48c1d92fe178253
      size: 94
